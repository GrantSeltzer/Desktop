#!/bin/bash


# Need to run check for multiple instances of code, if so increment counter for the name


code_num=$(docker ps | grep "grantseltzer/code:v0" | wc -l)


function vscode() {
        
	if [ $code_num != "0" ];
	then
		docker exec -it code zsh 
	else
		docker run \
        	-it \
        	--rm \
		--userns=host \
       		-e DISPLAY=unix$DISPLAY \
        	-e GOPATH=/home/grant/go \
        	-v /var/run/docker.sock:/var/run/docker.sock \
        	-v /home/grant/go:/home/grant/go \
        	-v /tmp/.X11-unix:/tmp/.X11-unix \
		-v /sys/kernel/debug:/sys/kernel/debug \
        	--group-add video \
        	--device /dev/dri \
        	--device /dev/snd \
		--runtime=runc \
		-v /usr/share/fonts:/usr/share/fonts \
		--privileged \
		--name code \
        	grantseltzer/code:v0 \
        	zsh
	fi
}

vscode
